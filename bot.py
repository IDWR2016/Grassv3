#!/usr/bin/env python3
# Self-decoding bot using Base64. Run with: python bot.py
import base64, sys, os

_ENC_B64 = """aW1wb3J0IHRocmVhZGluZw0KaW1wb3J0IGFzeW5jaW8NCmltcG9ydCBzc2wNCmltcG9ydCB0aW1lDQppbXBvcnQgdXVpZA0KaW1wb3J0IGpzb24NCmltcG9ydCByYW5kb20NCmltcG9ydCBiYXNlNjQNCmZyb20gYWlvaHR0cCBpbXBvcnQgQ2xpZW50U2Vzc2lvbiwgVENQQ29ubmVjdG9yDQpmcm9tIGNvbG9yYW1hIGltcG9ydCBGb3JlLCBTdHlsZSwgaW5pdA0KZnJvbSBsb2d1cnUgaW1wb3J0IGxvZ2dlcg0KZnJvbSBmYWtlX3VzZXJhZ2VudCBpbXBvcnQgVXNlckFnZW50DQpmcm9tIHdlYnNvY2tldHNfcHJveHkgaW1wb3J0IFByb3h5LCBwcm94eV9jb25uZWN0DQppbXBvcnQgb3MNCg0KaW5pdChhdXRvcmVzZXQ9VHJ1ZSkNCg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiMg8J+MvyBJRFdSIEdSQVNTIHYzIEJhbm5lcg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCmRlZiBzaG93X2Jhbm5lcigpOg0KICAgIG9zLnN5c3RlbSgiY2xzIiBpZiBvcy5uYW1lID09ICJudCIgZWxzZSAiY2xlYXIiKQ0KICAgIGJhbm5lciA9IGYiIiINCntGb3JlLlJFRH17U3R5bGUuQlJJR0hUfeKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlw0K4pWRICAge0ZvcmUuQkxVRX3wn4y/ICBJIEQgVyBSICAgRyBSIEEgUyBTICB2MyAgIHtGb3JlLlJFRH0gICDilZENCuKVkSAgIHtGb3JlLlJFRH1zdGF5IGZ1biBhbmQgYXdhcmUg8J+MsXtGb3JlLlJFRH0gICAgICAgICAgICDilZENCuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnQ0Ke1N0eWxlLlJFU0VUX0FMTH17Rm9yZS5ZRUxMT1d9DQrimpnvuI8gIE1lbmdpbmlzaWFsaXNhc2kga29uZWtzaSBkYW4ga29uZmlndXJhc2kuLi4NCntTdHlsZS5SRVNFVF9BTEx9DQoiIiINCiAgICBwcmludChiYW5uZXIpDQogICAgdGltZS5zbGVlcCgxLjUpDQoNCnNob3dfYmFubmVyKCkNCg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiMgQ09ORklHVVJBVElPTg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCkNPTkZJR19GSUxFID0gImNvbmZpZy5qc29uIg0KUFJPWElFU19GSUxFID0gInByb3hpZXMudHh0Ig0KDQojIC0tLSBMb2FkIGNvbmZpZyAtLS0NCnRyeToNCiAgICB3aXRoIG9wZW4oQ09ORklHX0ZJTEUsICJyIikgYXMgY2Y6DQogICAgICAgIF9jZmcgPSBqc29uLmxvYWQoY2YpDQogICAgICAgIFVTRVJfSURTID0gX2NmZy5nZXQoInVzZXJfaWRzIiwgW10pDQpleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgcHJpbnQoRm9yZS5SRUQgKyBmIuKdjCBHYWdhbCBsb2FkIHtDT05GSUdfRklMRX06IHtlfSIpDQogICAgZXhpdCgxKQ0KDQojIC0tLSBMb2FkIHByb3hpZXMgZnJvbSBwcm94aWVzLnR4dCAtLS0NCmRlZiBsb2FkX3Byb3hpZXMoKToNCiAgICBwcm94aWVzID0gW10NCiAgICB0cnk6DQogICAgICAgIHdpdGggb3BlbihQUk9YSUVTX0ZJTEUsICJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoNCiAgICAgICAgICAgIGZvciBsaW5lIGluIGY6DQogICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3RyaXAoKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBsaW5lIG9yIGxpbmUuc3RhcnRzd2l0aCgiIyIpOg0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIHByb3hpZXMuYXBwZW5kKGxpbmUpDQogICAgICAgIGlmIG5vdCBwcm94aWVzOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRmlsZSBwcm94aWVzLnR4dCBrb3NvbmcuIikNCiAgICAgICAgcHJpbnQoRm9yZS5HUkVFTiArIGYi4pyFIHtsZW4ocHJveGllcyl9IHByb3h5IGRpbXVhdCBkYXJpIHtQUk9YSUVTX0ZJTEV9IikNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KEZvcmUuUkVEICsgZiLinYwgR2FnYWwgbWVtYmFjYSB7UFJPWElFU19GSUxFfToge2V9IikNCiAgICAgICAgZXhpdCgxKQ0KICAgIHJldHVybiBwcm94aWVzDQoNCkJBU0VfUFJPWElFUyA9IGxvYWRfcHJveGllcygpDQoNCmRlZiBzZXR1cF9sb2dnZXIoKToNCiAgICBsb2dnZXIucmVtb3ZlKCkNCiAgICBsb2dnZXIuYWRkKCJib3QubG9nIiwNCiAgICAgICAgICAgICAgIGZvcm1hdD0iIDxsZXZlbD57bGV2ZWx9PC9sZXZlbD4gfCA8Y3lhbj57bWVzc2FnZX08L2N5YW4+IiwNCiAgICAgICAgICAgICAgIGxldmVsPSJJTkZPIiwgcm90YXRpb249IjEgZGF5IikNCiAgICBsb2dnZXIuYWRkKGxhbWJkYSBtc2c6IHByaW50KG1zZywgZW5kPSIiKSwNCiAgICAgICAgICAgICAgIGZvcm1hdD0iIDxsZXZlbD57bGV2ZWx9PC9sZXZlbD4gfCA8Y3lhbj57bWVzc2FnZX08L2N5YW4+IiwNCiAgICAgICAgICAgICAgIGxldmVsPSJJTkZPIiwgY29sb3JpemU9VHJ1ZSkNCg0KdWEgPSBVc2VyQWdlbnQoKQ0KDQpIRUFERVJTID0gew0KICAgICJVc2VyLUFnZW50IjogIkdyYXNzQm90LzUuMS4xIiwNCiAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLA0KICAgICJBY2NlcHQiOiAiKi8qIiwNCiAgICAiQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIg0KfQ0KDQpFUlJPUl9QQVRURVJOUyA9IFsNCiAgICAiSG9zdCB1bnJlYWNoYWJsZSIsDQogICAgIltTU0w6IFdST05HX1ZFUlNJT05fTlVNQkVSXSIsDQogICAgImludmFsaWQgbGVuZ3RoIG9mIHBhY2tlZCBJUCBhZGRyZXNzIHN0cmluZyIsDQogICAgIkVtcHR5IGNvbm5lY3QgcmVwbHkiLA0KICAgICJEZXZpY2UgY3JlYXRpb24gbGltaXQgZXhjZWVkZWQiLA0KICAgICJzZW50IDEwMTEgKGludGVybmFsIGVycm9yKSBrZWVwYWxpdmUgcGluZyB0aW1lb3V0Ig0KXQ0KDQpQSU5HX0lOVEVSVkFMID0gMzANCkNIRUNLSU5fSU5URVJWQUwgPSAzMDANCkRJUkVDVE9SX1NFUlZFUiA9ICJodHRwczovL2RpcmVjdG9yLmdldGdyYXNzLmlvIg0KDQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KIyBDT1JFIEZVTkNUSU9OUw0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCmFzeW5jIGRlZiBnZXRfY3VycmVudF9pcChwcm94eV91cmw6IHN0cik6DQogICAgdHJ5Og0KICAgICAgICBhc3luYyB3aXRoIENsaWVudFNlc3Npb24oKSBhcyBzZXNzaW9uOg0KICAgICAgICAgICAgYXN5bmMgd2l0aCBzZXNzaW9uLmdldCgiaHR0cDovL2lwaW5mby5pby9pcCIsIHByb3h5PXByb3h5X3VybCkgYXMgcmVzcG9uc2U6DQogICAgICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzID09IDIwMDoNCiAgICAgICAgICAgICAgICAgICAgaXAgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkNCiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5OhIElQIHlhbmcgZGlndW5ha2FuOiB7aXAuc3RyaXAoKX0iKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXAuc3RyaXAoKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIuKdjCBHYWdhbCBtZW5kYXBhdGthbiBJUCwgc3RhdHVzIHtyZXNwb25zZS5zdGF0dXN9IikNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGxvZ2dlci5lcnJvcihmIkVycm9yIHNhYXQgbWVuZ2FtYmlsIElQOiB7ZX0iKQ0KICAgICAgICByZXR1cm4gTm9uZQ0KDQoNCmFzeW5jIGRlZiBnZXRfd3NfZW5kcG9pbnRzKGRldmljZV9pZDogc3RyLCB1c2VyX2lkOiBzdHIsIHByb3h5X3VybDogc3RyKToNCiAgICBIRUFERVJTWyJVc2VyLUFnZW50Il0gPSB1YS5yYW5kb20NCiAgICB1cmwgPSBmIntESVJFQ1RPUl9TRVJWRVJ9L2NoZWNraW4iDQogICAgcGF5bG9hZCA9IHsNCiAgICAgICAgImJyb3dzZXJJZCI6IGRldmljZV9pZCwNCiAgICAgICAgInVzZXJJZCI6IHVzZXJfaWQsDQogICAgICAgICJ2ZXJzaW9uIjogIjUuMS4xIiwNCiAgICAgICAgImV4dGVuc2lvbklkIjogImxrYm5maWFqam1iaG5mbGVkaHBoaW9pbnBpY2tva2RpIiwNCiAgICAgICAgInVzZXJBZ2VudCI6IEhFQURFUlNbIlVzZXItQWdlbnQiXSwNCiAgICAgICAgImRldmljZVR5cGUiOiAiZXh0ZW5zaW9uIg0KICAgIH0NCiAgICBjb25uZWN0b3IgPSBUQ1BDb25uZWN0b3Ioc3NsPUZhbHNlKQ0KICAgIGFzeW5jIHdpdGggQ2xpZW50U2Vzc2lvbihjb25uZWN0b3I9Y29ubmVjdG9yKSBhcyBzZXNzaW9uOg0KICAgICAgICBhdHRlbXB0ID0gMA0KICAgICAgICB3aGlsZSBhdHRlbXB0IDwgNToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBhc3luYyB3aXRoIHNlc3Npb24ucG9zdCh1cmwsIGpzb249cGF5bG9hZCwgaGVhZGVycz1IRUFERVJTLCBwcm94eT1wcm94eV91cmwpIGFzIHJlc3A6DQogICAgICAgICAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzID09IDQyOToNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKGYi4pqg77iPIFJhdGUgTGltaXRpbmcgRGV0ZWN0ZWQhIEF0dGVtcHQge2F0dGVtcHQgKyAxfSIpDQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0X3RpbWUgPSByYW5kb20udW5pZm9ybSg1LCAxNSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYi4o+zIE1lbnVuZ2d1IHt3YWl0X3RpbWU6LjJmfSBkZXRpayBzZWJlbHVtIG1lbmNvYmEgbGFnaS4uLiIpDQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKHdhaXRfdGltZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVtcHQgKz0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxpZiByZXNwLnN0YXR1cyAhPSAyMDE6DQogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJDaGVjay1pbiBnYWdhbCAoc3RhdHVzIHtyZXNwLnN0YXR1c30pIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXSwgIiINCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3AuanNvbihjb250ZW50X3R5cGU9Tm9uZSkNCiAgICAgICAgICAgICAgICAgICAgZGVzdHMgPSBbZiJ3c3M6Ly97ZH0iIGZvciBkIGluIGRhdGEuZ2V0KCJkZXN0aW5hdGlvbnMiLCBbXSldDQogICAgICAgICAgICAgICAgICAgIHRva2VuID0gZGF0YS5nZXQoInRva2VuIiwgIiIpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXN0cywgdG9rZW4NCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJDaGVjay1pbiBlcnJvcjoge2V9IikNCiAgICAgICAgICAgICAgICByZXR1cm4gW10sICIiDQogICAgICAgIGxvZ2dlci5lcnJvcigi4p2MIEdhZ2FsIG1lbGFrdWthbiBjaGVjay1pbiBzZXRlbGFoIDUgcGVyY29iYWFuIikNCiAgICAgICAgcmV0dXJuIFtdLCAiIg0KDQoNCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQojIFdFQlNPQ0tFVCBDTElFTlQgQ0xBU1MNCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpjbGFzcyBXZWJTb2NrZXRDbGllbnQ6DQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRldmljZV9pZDogc3RyLCB1c2VyX2lkOiBzdHIsIHByb3h5X3VybDogc3RyKToNCiAgICAgICAgc2VsZi5kZXZpY2VfaWQgPSBkZXZpY2VfaWQNCiAgICAgICAgc2VsZi51c2VyX2lkID0gdXNlcl9pZA0KICAgICAgICBzZWxmLnByb3h5X3VybCA9IHByb3h5X3VybA0KICAgICAgICBzZWxmLmJhc2VfcHJveHkgPSBCQVNFX1BST1hJRVNbMF0gaWYgQkFTRV9QUk9YSUVTIGVsc2UgcHJveHlfdXJsDQogICAgICAgIHNlbGYudXJpID0gTm9uZQ0KDQogICAgYXN5bmMgZGVmIGNvbm5lY3Qoc2VsZikgLT4gTm9uZToNCiAgICAgICAgbG9nZ2VyLmluZm8oZiLwn5al77iPIERldmljZSB7c2VsZi5kZXZpY2VfaWR9IOKeoe+4jyBQcm94eSBDb25uZWN0ZWQ6IHtzZWxmLnByb3h5X3VybH0iKQ0KICAgICAgICBpcCA9IGF3YWl0IGdldF9jdXJyZW50X2lwKHNlbGYucHJveHlfdXJsKQ0KICAgICAgICBpZiBpcDoNCiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYi8J+Wpe+4jyBEZXZpY2Uge3NlbGYuZGV2aWNlX2lkfSBtZW5nZ3VuYWthbiBJUCB7aXB9IikNCg0KICAgICAgICB3aGlsZSBUcnVlOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGVuZHBvaW50cywgdG9rZW4gPSBhd2FpdCBnZXRfd3NfZW5kcG9pbnRzKHNlbGYuZGV2aWNlX2lkLCBzZWxmLnVzZXJfaWQsIHNlbGYucHJveHlfdXJsKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBlbmRwb2ludHMgb3Igbm90IHRva2VuOg0KICAgICAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oIkludmFsaWQgZW5kcG9pbnRzL3Rva2VuIikNCiAgICAgICAgICAgICAgICBzZWxmLnVyaSA9IGYie2VuZHBvaW50c1swXX0/dG9rZW49e3Rva2VufSINCg0KICAgICAgICAgICAgICAgIHNzbF9jdHggPSBzc2wuY3JlYXRlX2RlZmF1bHRfY29udGV4dCgpDQogICAgICAgICAgICAgICAgc3NsX2N0eC5jaGVja19ob3N0bmFtZSA9IEZhbHNlDQogICAgICAgICAgICAgICAgc3NsX2N0eC52ZXJpZnlfbW9kZSA9IHNzbC5DRVJUX05PTkUNCg0KICAgICAgICAgICAgICAgIEhFQURFUlNbIlVzZXItQWdlbnQiXSA9IHVhLnJhbmRvbQ0KICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggcHJveHlfY29ubmVjdChzZWxmLnVyaSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHk9UHJveHkuZnJvbV91cmwoc2VsZi5wcm94eV91cmwpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzc2w9c3NsX2N0eCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFfaGVhZGVycz1IRUFERVJTKSBhcyB3czoNCiAgICAgICAgICAgICAgICAgICAgcGluZ190YXNrID0gYXN5bmNpby5jcmVhdGVfdGFzayhzZWxmLl9zZW5kX3Bpbmcod3MpKQ0KICAgICAgICAgICAgICAgICAgICBjaGVja2luX3Rhc2sgPSBhc3luY2lvLmNyZWF0ZV90YXNrKHNlbGYuX3BlcmlvZGljX2NoZWNraW4oKSkNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5faGFuZGxlX21lc3NhZ2VzKHdzKQ0KICAgICAgICAgICAgICAgICAgICBwaW5nX3Rhc2suY2FuY2VsKCkNCiAgICAgICAgICAgICAgICAgICAgY2hlY2tpbl90YXNrLmNhbmNlbCgpDQoNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiLwn5qrIEtvbmVrc2kgZXJyb3I6IHtlfSIpDQogICAgICAgICAgICAgICAgaWYgc2VsZi5wcm94eV91cmwgIT0gc2VsZi5iYXNlX3Byb3h5Og0KICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIvCflIQgRmFsbGJhY2sga2UgQkFTRV9QUk9YWSAoe3NlbGYuYmFzZV9wcm94eX0pIikNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm94eV91cmwgPSBzZWxmLmJhc2VfcHJveHkNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXN5bmNpby5zbGVlcCgxKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLinYwgQkFTRV9QUk9YWSBnYWdhbCwgcmV0cnkgZGFsYW0gNSBkZXRpayIpDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoNSkNCg0KICAgIGFzeW5jIGRlZiBfc2VuZF9waW5nKHNlbGYsIHdzKToNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBtc2cgPSB7ImlkIjogc3RyKHV1aWQudXVpZDQoKSksICJ2ZXJzaW9uIjogIjEuMC4wIiwgImFjdGlvbiI6ICJQSU5HIiwgImRhdGEiOiB7fX0NCiAgICAgICAgICAgICAgICBhd2FpdCB3cy5zZW5kKGpzb24uZHVtcHMobXNnKSkNCiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIvCfkqwgUElORyBkaWtpcmltOiB7bXNnWydpZCddfSIpDQogICAgICAgICAgICAgICAgYXdhaXQgYXN5bmNpby5zbGVlcChQSU5HX0lOVEVSVkFMKQ0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIlBpbmcgZXJyb3I6IHtlfSIpDQogICAgICAgICAgICAgICAgYnJlYWsNCg0KICAgIGFzeW5jIGRlZiBfcGVyaW9kaWNfY2hlY2tpbihzZWxmKToNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoQ0hFQ0tJTl9JTlRFUlZBTCkNCiAgICAgICAgICAgIGF3YWl0IGdldF93c19lbmRwb2ludHMoc2VsZi5kZXZpY2VfaWQsIHNlbGYudXNlcl9pZCwgc2VsZi5wcm94eV91cmwpDQoNCiAgICBhc3luYyBkZWYgX2hhbmRsZV9tZXNzYWdlcyhzZWxmLCB3cyk6DQogICAgICAgIGhhbmRsZXJzID0geyJBVVRIIjogc2VsZi5faGFuZGxlX2F1dGgsICJQT05HIjogc2VsZi5faGFuZGxlX3BvbmcsICJIVFRQX1JFUVVFU1QiOiBzZWxmLl9oYW5kbGVfaHR0cF9yZXF1ZXN0fQ0KICAgICAgICB3aGlsZSBUcnVlOg0KICAgICAgICAgICAgcmF3ID0gYXdhaXQgd3MucmVjdigpDQogICAgICAgICAgICBtc2cgPSBqc29uLmxvYWRzKHJhdykNCiAgICAgICAgICAgIGFjdGlvbiA9IG1zZy5nZXQoImFjdGlvbiIpDQogICAgICAgICAgICBpZiBhY3Rpb24gPT0gIlBPTkciOg0KICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYi8J+SrCBQT05HIGRpdGVyaW1hOiB7bXNnWydpZCddfSIpDQogICAgICAgICAgICBlbGlmIGFjdGlvbiBpbiBoYW5kbGVyczoNCiAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyc1thY3Rpb25dKHdzLCBtc2cpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIlRpZGFrIGFkYSBoYW5kbGVyIHVudHVrIGFjdGlvbjoge2FjdGlvbn0iKQ0KDQogICAgYXN5bmMgZGVmIF9oYW5kbGVfYXV0aChzZWxmLCB3cywgbXNnKToNCiAgICAgICAgcmVzcCA9IHsNCiAgICAgICAgICAgICJpZCI6IG1zZ1siaWQiXSwNCiAgICAgICAgICAgICJvcmlnaW5fYWN0aW9uIjogIkFVVEgiLA0KICAgICAgICAgICAgInJlc3VsdCI6IHsNCiAgICAgICAgICAgICAgICAiYnJvd3Nlcl9pZCI6IHNlbGYuZGV2aWNlX2lkLA0KICAgICAgICAgICAgICAgICJ1c2VyX2lkIjogc2VsZi51c2VyX2lkLA0KICAgICAgICAgICAgICAgICJ1c2VyX2FnZW50IjogSEVBREVSU1siVXNlci1BZ2VudCJdLA0KICAgICAgICAgICAgICAgICJ0aW1lc3RhbXAiOiBpbnQodGltZS50aW1lKCkpLA0KICAgICAgICAgICAgICAgICJkZXZpY2VfdHlwZSI6ICJleHRlbnNpb24iLA0KICAgICAgICAgICAgICAgICJ2ZXJzaW9uIjogIjUuMS4xIg0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGF3YWl0IHdzLnNlbmQoanNvbi5kdW1wcyhyZXNwKSkNCg0KICAgIGFzeW5jIGRlZiBfaGFuZGxlX3Bvbmcoc2VsZiwgd3MsIG1zZyk6DQogICAgICAgIHJlc3AgPSB7ImlkIjogbXNnWyJpZCJdLCAib3JpZ2luX2FjdGlvbiI6ICJQT05HIn0NCiAgICAgICAgYXdhaXQgd3Muc2VuZChqc29uLmR1bXBzKHJlc3ApKQ0KDQogICAgYXN5bmMgZGVmIF9oYW5kbGVfaHR0cF9yZXF1ZXN0KHNlbGYsIHdzLCBtc2cpOg0KICAgICAgICBkID0gbXNnLmdldCgiZGF0YSIsIHt9KQ0KICAgICAgICBtZXRob2QgPSBkLmdldCgibWV0aG9kIiwgIkdFVCIpLnVwcGVyKCkNCiAgICAgICAgdXJsID0gZC5nZXQoInVybCIpDQogICAgICAgIGhkcnMgPSBkLmdldCgiaGVhZGVycyIsIHt9KQ0KICAgICAgICBoZHJzWyJVc2VyLUFnZW50Il0gPSB1YS5yYW5kb20NCiAgICAgICAgYm9keSA9IGQuZ2V0KCJib2R5IikNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgYXN5bmMgd2l0aCBDbGllbnRTZXNzaW9uKCkgYXMgc2Vzc2lvbjoNCiAgICAgICAgICAgICAgICBhc3luYyB3aXRoIHNlc3Npb24ucmVxdWVzdChtZXRob2QsIHVybCwgaGVhZGVycz1oZHJzLCBkYXRhPWJvZHkpIGFzIHI6DQogICAgICAgICAgICAgICAgICAgIGlmIHIuc3RhdHVzID09IDQyOToNCiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigiUmF0ZSBsaW1pdGVkIikNCiAgICAgICAgICAgICAgICAgICAgcmVzX2hlYWRlcnMgPSBkaWN0KHIuaGVhZGVycykNCiAgICAgICAgICAgICAgICAgICAgcmVzX2J5dGVzID0gYXdhaXQgci5yZWFkKCkNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiSFRUUF9SRVFVRVNUIGVycm9yOiB7ZX0iKQ0KICAgICAgICAgICAgcmFpc2UNCiAgICAgICAgYjY0ID0gYmFzZTY0LmI2NGVuY29kZShyZXNfYnl0ZXMpLmRlY29kZSgpDQogICAgICAgIHJlc3VsdCA9IHsidXJsIjogdXJsLCAic3RhdHVzIjogci5zdGF0dXMsICJzdGF0dXNfdGV4dCI6ICIiLCAiaGVhZGVycyI6IHJlc19oZWFkZXJzLCAiYm9keSI6IGI2NH0NCiAgICAgICAgcmVwbHkgPSB7ImlkIjogbXNnWyJpZCJdLCAib3JpZ2luX2FjdGlvbiI6ICJIVFRQX1JFUVVFU1QiLCAicmVzdWx0IjogcmVzdWx0fQ0KICAgICAgICBhd2FpdCB3cy5zZW5kKGpzb24uZHVtcHMocmVwbHkpKQ0KDQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KIyBNQUlOIFRIUkVBRCBIQU5ETEVSDQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KZGVmIHN0YXJ0X2NsaWVudChkZXZpY2VfaWQ6IHN0ciwgdXNlcl9pZDogc3RyLCBwcm94eV91cmw6IHN0cik6DQogICAgYXN5bmNpby5ydW4oV2ViU29ja2V0Q2xpZW50KGRldmljZV9pZCwgdXNlcl9pZCwgcHJveHlfdXJsKS5jb25uZWN0KCkpDQoNCmRlZiBtYWluKCk6DQogICAgc2V0dXBfbG9nZ2VyKCkNCiAgICB0aHJlYWRzX2NvdW50ID0gaW50KGlucHV0KCLwn5SiIEp1bWxhaCB0aHJlYWQgcGVyIFVTRVIgKG1heCAxMCk6ICIpKQ0KDQogICAgaWYgdGhyZWFkc19jb3VudCA+IDEwOg0KICAgICAgICBwcmludChGb3JlLlJFRCArICLinYwgSnVtbGFoIHRocmVhZCBtYWtzaW1hbCBhZGFsYWggMTAuIikNCiAgICAgICAgcmV0dXJuDQoNCiAgICBsb2dnZXIuaW5mbyhmIvCfmoAgTWVuamFsYW5rYW4ge3RocmVhZHNfY291bnR9IHRocmVhZHMgdW50dWsgdGlhcCBVU0VSIikNCiAgICB0aHJlYWRzID0gW10NCiAgICBwcm94eV9jb3VudCA9IGxlbihCQVNFX1BST1hJRVMpDQogICAgaWYgcHJveHlfY291bnQgPT0gMDoNCiAgICAgICAgbG9nZ2VyLmVycm9yKCLinYwgVGlkYWsgYWRhIHByb3h5IGRpIGtvbmZpZ3VyYXNpISIpDQogICAgICAgIHJldHVybg0KDQogICAgaWR4ID0gMA0KICAgIGZvciB1aWQgaW4gVVNFUl9JRFM6DQogICAgICAgIGZvciBfIGluIHJhbmdlKHRocmVhZHNfY291bnQpOg0KICAgICAgICAgICAgZGV2X2lkID0gc3RyKHV1aWQudXVpZDQoKSkNCiAgICAgICAgICAgIHByb3h5X3VybCA9IEJBU0VfUFJPWElFU1tpZHggJSBwcm94eV9jb3VudF0NCiAgICAgICAgICAgIGlkeCArPSAxDQogICAgICAgICAgICB0ID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c3RhcnRfY2xpZW50LCBhcmdzPShkZXZfaWQsIHVpZCwgcHJveHlfdXJsKSwgZGFlbW9uPVRydWUpDQogICAgICAgICAgICB0LnN0YXJ0KCkNCiAgICAgICAgICAgIHRocmVhZHMuYXBwZW5kKHQpDQogICAgICAgICAgICB0aW1lLnNsZWVwKDAuMSkNCg0KICAgIHRyeToNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIHRpbWUuc2xlZXAoNjApDQogICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0Og0KICAgICAgICBsb2dnZXIuaW5mbygi8J+RiyBTaHV0dGluZyBkb3duLi4uIikNCg0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoNCiAgICBtYWluKCkNCiAg"""

def main():
    try:
        data = base64.b64decode(_ENC_B64)
    except Exception as e:
        print("Decoding error:", e, file=sys.stderr)
        sys.exit(1)
    try:
        src = data.decode("utf-8")
    except UnicodeDecodeError:
        print("Decoded source is not valid UTF-8", file=sys.stderr)
        sys.exit(1)
    glb = {"__name__": "__main__"}
    exec(compile(src, "<decrypted_bot>", "exec"), glb, glb)

if __name__ == "__main__":
    main()
